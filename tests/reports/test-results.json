{
  "config": {
    "configFile": "/Users/urikogan/code/dedup/playwright.config.js",
    "rootDir": "/Users/urikogan/code/dedup/tests/e2e",
    "forbidOnly": false,
    "fullyParallel": true,
    "globalSetup": null,
    "globalTeardown": null,
    "globalTimeout": 0,
    "grep": {},
    "grepInvert": null,
    "maxFailures": 0,
    "metadata": {
      "actualWorkers": 4
    },
    "preserveOutput": "always",
    "reporter": [
      [
        "html",
        {
          "outputFolder": "tests/reports/playwright-report"
        }
      ],
      [
        "json",
        {
          "outputFile": "tests/reports/test-results.json"
        }
      ]
    ],
    "reportSlowTests": {
      "max": 5,
      "threshold": 300000
    },
    "quiet": false,
    "projects": [
      {
        "outputDir": "/Users/urikogan/code/dedup/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 4
        },
        "id": "chromium",
        "name": "chromium",
        "testDir": "/Users/urikogan/code/dedup/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 30000
      },
      {
        "outputDir": "/Users/urikogan/code/dedup/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 4
        },
        "id": "firefox",
        "name": "firefox",
        "testDir": "/Users/urikogan/code/dedup/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 30000
      },
      {
        "outputDir": "/Users/urikogan/code/dedup/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 4
        },
        "id": "webkit",
        "name": "webkit",
        "testDir": "/Users/urikogan/code/dedup/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 30000
      }
    ],
    "shard": null,
    "updateSnapshots": "missing",
    "updateSourceMethod": "patch",
    "version": "1.55.0",
    "workers": 4,
    "webServer": {
      "command": "python3 app.py",
      "url": "http://127.0.0.1:5003",
      "reuseExistingServer": true,
      "timeout": 30000
    }
  },
  "suites": [
    {
      "title": "test_photo_deletion_workflow_diagnostics.spec.js",
      "file": "test_photo_deletion_workflow_diagnostics.spec.js",
      "column": 0,
      "line": 0,
      "specs": [],
      "suites": [
        {
          "title": "Photo Deletion Workflow Performance Diagnostics",
          "file": "test_photo_deletion_workflow_diagnostics.spec.js",
          "line": 6,
          "column": 6,
          "specs": [
            {
              "title": "API Endpoint Performance - /api/groups with limit=10",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 680,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing /api/groups endpoint performance...\n"
                        },
                        {
                          "text": "⏱️ /api/groups response time: 22ms\n"
                        },
                        {
                          "text": "📊 Groups returned: 0\n"
                        },
                        {
                          "text": "📊 Total photos: 0\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:10.075Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-ef36a3e75ed29708b594",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 29,
              "column": 7
            },
            {
              "title": "API Endpoint Performance - /api/complete-workflow",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 1,
                      "parallelIndex": 1,
                      "status": "passed",
                      "duration": 557,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing /api/complete-workflow endpoint performance...\n"
                        },
                        {
                          "text": "📊 Got 0 groups for workflow test\n"
                        },
                        {
                          "text": "⚠️ No groups available for workflow test\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:10.083Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-70cc29d9a848fbdc9a40",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 60,
              "column": 7
            },
            {
              "title": "Step-by-Step Legacy Page Workflow Timing",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 2,
                      "parallelIndex": 2,
                      "status": "failed",
                      "duration": 22062,
                      "error": {
                        "message": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n",
                        "stack": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:134:14",
                        "location": {
                          "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                          "column": 14,
                          "line": 134
                        },
                        "snippet": "  132 |       // Wait for either groups to appear or error message\n  133 |       await Promise.race([\n> 134 |         page.waitForSelector('.group-card', { timeout: 15000 }),\n      |              ^\n  135 |         page.waitForSelector('.error', { timeout: 15000 }),\n  136 |         page.waitForSelector('[data-testid=\"no-groups\"]', { timeout: 15000 })\n  137 |       ]);"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                            "column": 14,
                            "line": 134
                          },
                          "message": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n\n  132 |       // Wait for either groups to appear or error message\n  133 |       await Promise.race([\n> 134 |         page.waitForSelector('.group-card', { timeout: 15000 }),\n      |              ^\n  135 |         page.waitForSelector('.error', { timeout: 15000 }),\n  136 |         page.waitForSelector('[data-testid=\"no-groups\"]', { timeout: 15000 })\n  137 |       ]);\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:134:14"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing legacy page step-by-step workflow timing...\n"
                        },
                        {
                          "text": "🚀 Step 1: Loading legacy page...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "⏱️ Step 1 (Page load): 545ms\n"
                        },
                        {
                          "text": "🚀 Step 2: Waiting for groups to load...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "❌ Step 2 TIMEOUT after 15010ms: TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n"
                        },
                        {
                          "text": "📝 Page content at timeout: \n        \n            🖼️ Photo Deduplication Tool\n            Stage 3: Visual Interface\n            Status: Interactive photo selection with thumbnails - click photos to select/deselect for keeping\n        \n\n        ✅ Photos library connected\n\n        \n                            \n                                ~3794 MB\n                                Potential Savings\n                            \n                            \n                                500\n                                ...\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:10.113Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-chromium/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-chromium/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-chromium/error-context.md"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                        "column": 14,
                        "line": 134
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-f42a1552522520a2f1ea",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 116,
              "column": 7
            },
            {
              "title": "JavaScript Memory and Performance Monitoring",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 3,
                      "parallelIndex": 3,
                      "status": "passed",
                      "duration": 12941,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing JavaScript performance and memory usage...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "📊 Initial memory usage: 1.19 MB\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "📊 Memory at 2s: 1.34 MB (+154.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 4s: 1.35 MB (+4.9 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 6s: 1.35 MB (+4.4 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 8s: 1.36 MB (+4.4 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 10s: 1.36 MB (+4.4 KB)\n"
                        },
                        {
                          "text": "✅ Memory usage appears stable\n"
                        },
                        {
                          "text": "📊 DOM content loaded: 0ms\n"
                        },
                        {
                          "text": "📊 Page load complete: 0ms\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:10.086Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-04eebbe466ad11329d01",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 204,
              "column": 7
            },
            {
              "title": "Network Request Waterfall Analysis",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 1,
                      "parallelIndex": 1,
                      "status": "passed",
                      "duration": 5473,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Analyzing network request patterns...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "\n📊 Request Timeline:\n"
                        },
                        {
                          "text": "20ms - request: GET http://127.0.0.1:5003/legacy \n"
                        },
                        {
                          "text": "29ms - response:  http://127.0.0.1:5003/legacy 200\n"
                        },
                        {
                          "text": "1034ms - request: GET http://127.0.0.1:5003/api/stats \n"
                        },
                        {
                          "text": "1141ms - response:  http://127.0.0.1:5003/api/stats 200\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:12.696Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-49bea5db98ef28b01ace",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 271,
              "column": 7
            },
            {
              "title": "Backend API Health Check",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 586,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing backend API health...\n"
                        },
                        {
                          "text": "🔍 Testing /api/health...\n"
                        },
                        {
                          "text": "✅ /api/health: 200 (9ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"stage\": \"Stage 5A: Lazy Loading Foundation\",\n  \"status\": \"healthy\",\n  \"timestamp\": \"2025-08-27T18:17:13.085525\"\n}...\n"
                        },
                        {
                          "text": "🔍 Testing /api/stats...\n"
                        },
                        {
                          "text": "✅ /api/stats: 200 (261ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"estimated_savings\": \"~3794 MB\",\n  \"potential_groups\": 1610,\n  \"sample_groups\": 62,\n  \"sample_photos\": 500,\n  \"sample_savings_mb\": 146.1,\n  \"success\": true,\n  \"timestamp\": \"2025-08-27T18:17:13.348...\n"
                        },
                        {
                          "text": "🔍 Testing /api/cache-stats...\n"
                        },
                        {
                          "text": "✅ /api/cache-stats: 200 (4ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"cache_stats\": {\n    \"cache_timestamp\": null,\n    \"clusters_cached\": 0,\n    \"metadata_cached\": 0\n  },\n  \"success\": true,\n  \"timestamp\": \"2025-08-27T18:17:13.353432\"\n}...\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:12.823Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-de2dbbead12ea7e18473",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 342,
              "column": 7
            },
            {
              "title": "Comprehensive Workflow Hang Detection",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "chromium",
                  "projectName": "chromium",
                  "results": [
                    {
                      "workerIndex": 0,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 2519,
                      "error": {
                        "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m",
                        "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:441:33",
                        "location": {
                          "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                          "column": 33,
                          "line": 441
                        },
                        "snippet": "  439 |     } else {\n  440 |       console.log('🚨 Workflow hang confirmed');\n> 441 |       expect(workflowCompleted).toBe(true); // This will fail and show hang point\n      |                                 ^\n  442 |     }\n  443 |   });\n  444 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                            "column": 33,
                            "line": 441
                          },
                          "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n\n  439 |     } else {\n  440 |       console.log('🚨 Workflow hang confirmed');\n> 441 |       expect(workflowCompleted).toBe(true); // This will fail and show hang point\n      |                                 ^\n  442 |     }\n  443 |   });\n  444 |\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:441:33"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "\n🧪 Running comprehensive workflow hang detection...\n"
                        },
                        {
                          "text": "📍 Checkpoint 1: Loading legacy page...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "📍 Checkpoint 2: Waiting for page load...\n"
                        },
                        {
                          "text": "📍 Checkpoint 3: Waiting for groups or error...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "🚨 WORKFLOW HANG DETECTED: page.waitForSelector: Timeout 2000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('[data-testid=\"loading\"]') to be visible\u001b[22m\n\n"
                        },
                        {
                          "text": "📍 Hang details:\n"
                        },
                        {
                          "text": "- URL: http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "- Title: Photo Dedup Tool\n"
                        },
                        {
                          "text": "- Body length: 58334 chars\n"
                        },
                        {
                          "text": "- Body preview: \n        \n            🖼️ Photo Deduplication Tool\n            Stage 3: Visual Interface\n            Status: Interactive photo selection with thumbnails - click photos to select/deselect for keeping\n        \n\n        ✅ Photos library connected\n\n        \n                            \n                 ...\n"
                        },
                        {
                          "text": "🚨 Workflow hang confirmed\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:13.419Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-chromium/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-chromium/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-chromium/error-context.md"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                        "column": 33,
                        "line": 441
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-f7333ce0c9785b0d0729",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 373,
              "column": 7
            },
            {
              "title": "API Endpoint Performance - /api/groups with limit=10",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "firefox",
                  "projectName": "firefox",
                  "results": [
                    {
                      "workerIndex": 4,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 868,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing /api/groups endpoint performance...\n"
                        },
                        {
                          "text": "⏱️ /api/groups response time: 15ms\n"
                        },
                        {
                          "text": "📊 Groups returned: 0\n"
                        },
                        {
                          "text": "📊 Total photos: 0\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:16.319Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-a25af38f2ff35042ba97",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 29,
              "column": 7
            },
            {
              "title": "API Endpoint Performance - /api/complete-workflow",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "firefox",
                  "projectName": "firefox",
                  "results": [
                    {
                      "workerIndex": 5,
                      "parallelIndex": 1,
                      "status": "passed",
                      "duration": 864,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing /api/complete-workflow endpoint performance...\n"
                        },
                        {
                          "text": "📊 Got 0 groups for workflow test\n"
                        },
                        {
                          "text": "⚠️ No groups available for workflow test\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:18.656Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-8d42034d9c834802329d",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 60,
              "column": 7
            },
            {
              "title": "Step-by-Step Legacy Page Workflow Timing",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "firefox",
                  "projectName": "firefox",
                  "results": [
                    {
                      "workerIndex": 4,
                      "parallelIndex": 0,
                      "status": "failed",
                      "duration": 15873,
                      "error": {
                        "message": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n",
                        "stack": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:134:14",
                        "location": {
                          "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                          "column": 14,
                          "line": 134
                        },
                        "snippet": "  132 |       // Wait for either groups to appear or error message\n  133 |       await Promise.race([\n> 134 |         page.waitForSelector('.group-card', { timeout: 15000 }),\n      |              ^\n  135 |         page.waitForSelector('.error', { timeout: 15000 }),\n  136 |         page.waitForSelector('[data-testid=\"no-groups\"]', { timeout: 15000 })\n  137 |       ]);"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                            "column": 14,
                            "line": 134
                          },
                          "message": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n\n  132 |       // Wait for either groups to appear or error message\n  133 |       await Promise.race([\n> 134 |         page.waitForSelector('.group-card', { timeout: 15000 }),\n      |              ^\n  135 |         page.waitForSelector('.error', { timeout: 15000 }),\n  136 |         page.waitForSelector('[data-testid=\"no-groups\"]', { timeout: 15000 })\n  137 |       ]);\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:134:14"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing legacy page step-by-step workflow timing...\n"
                        },
                        {
                          "text": "🚀 Step 1: Loading legacy page...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "⏱️ Step 1 (Page load): 555ms\n"
                        },
                        {
                          "text": "🚀 Step 2: Waiting for groups to load...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "❌ Step 2 TIMEOUT after 15008ms: TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n"
                        },
                        {
                          "text": "📝 Page content at timeout: \n        \n            🖼️ Photo Deduplication Tool\n            Stage 3: Visual Interface\n            Status: Interactive photo selection with thumbnails - click photos to select/deselect for keeping\n        \n\n        ✅ Photos library connected\n\n        \n                            \n                                ~3794 MB\n                                Potential Savings\n                            \n                            \n                                500\n                                ...\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:18.949Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-firefox/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-firefox/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-firefox/error-context.md"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                        "column": 14,
                        "line": 134
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-473348d44bc5bc5d2ca2",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 116,
              "column": 7
            },
            {
              "title": "JavaScript Memory and Performance Monitoring",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "firefox",
                  "projectName": "firefox",
                  "results": [
                    {
                      "workerIndex": 5,
                      "parallelIndex": 1,
                      "status": "passed",
                      "duration": 12465,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing JavaScript performance and memory usage...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "📊 Initial memory usage: 0.00 MB\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "📊 Memory at 2s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 4s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 6s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 8s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 10s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "✅ Memory usage appears stable\n"
                        },
                        {
                          "text": "📊 DOM content loaded: 1ms\n"
                        },
                        {
                          "text": "📊 Page load complete: 0ms\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:20.112Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-7796d549083b3f7fe8cc",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 204,
              "column": 7
            },
            {
              "title": "Network Request Waterfall Analysis",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "firefox",
                  "projectName": "firefox",
                  "results": [
                    {
                      "workerIndex": 6,
                      "parallelIndex": 3,
                      "status": "passed",
                      "duration": 5815,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Analyzing network request patterns...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "\n📊 Request Timeline:\n"
                        },
                        {
                          "text": "12ms - request: GET http://127.0.0.1:5003/legacy \n"
                        },
                        {
                          "text": "73ms - response:  http://127.0.0.1:5003/legacy 200\n"
                        },
                        {
                          "text": "1090ms - request: GET http://127.0.0.1:5003/api/stats \n"
                        },
                        {
                          "text": "1174ms - response:  http://127.0.0.1:5003/api/stats 200\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:25.416Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-c34b18ec1c346d43f7ac",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 271,
              "column": 7
            },
            {
              "title": "Backend API Health Check",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "firefox",
                  "projectName": "firefox",
                  "results": [
                    {
                      "workerIndex": 6,
                      "parallelIndex": 3,
                      "status": "passed",
                      "duration": 323,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing backend API health...\n"
                        },
                        {
                          "text": "🔍 Testing /api/health...\n"
                        },
                        {
                          "text": "✅ /api/health: 200 (7ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"stage\": \"Stage 5A: Lazy Loading Foundation\",\n  \"status\": \"healthy\",\n  \"timestamp\": \"2025-08-27T18:17:31.866241\"\n}...\n"
                        },
                        {
                          "text": "🔍 Testing /api/stats...\n"
                        },
                        {
                          "text": "✅ /api/stats: 200 (95ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"estimated_savings\": \"~3794 MB\",\n  \"potential_groups\": 1610,\n  \"sample_groups\": 62,\n  \"sample_photos\": 500,\n  \"sample_savings_mb\": 146.1,\n  \"success\": true,\n  \"timestamp\": \"2025-08-27T18:17:31.962...\n"
                        },
                        {
                          "text": "🔍 Testing /api/cache-stats...\n"
                        },
                        {
                          "text": "✅ /api/cache-stats: 200 (2ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"cache_stats\": {\n    \"cache_timestamp\": null,\n    \"clusters_cached\": 0,\n    \"metadata_cached\": 0\n  },\n  \"success\": true,\n  \"timestamp\": \"2025-08-27T18:17:31.965443\"\n}...\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:31.693Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-82f06fd15cd640e1b774",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 342,
              "column": 7
            },
            {
              "title": "Comprehensive Workflow Hang Detection",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "firefox",
                  "projectName": "firefox",
                  "results": [
                    {
                      "workerIndex": 6,
                      "parallelIndex": 3,
                      "status": "failed",
                      "duration": 2334,
                      "error": {
                        "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m",
                        "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:441:33",
                        "location": {
                          "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                          "column": 33,
                          "line": 441
                        },
                        "snippet": "  439 |     } else {\n  440 |       console.log('🚨 Workflow hang confirmed');\n> 441 |       expect(workflowCompleted).toBe(true); // This will fail and show hang point\n      |                                 ^\n  442 |     }\n  443 |   });\n  444 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                            "column": 33,
                            "line": 441
                          },
                          "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n\n  439 |     } else {\n  440 |       console.log('🚨 Workflow hang confirmed');\n> 441 |       expect(workflowCompleted).toBe(true); // This will fail and show hang point\n      |                                 ^\n  442 |     }\n  443 |   });\n  444 |\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:441:33"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "\n🧪 Running comprehensive workflow hang detection...\n"
                        },
                        {
                          "text": "📍 Checkpoint 1: Loading legacy page...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "📍 Checkpoint 2: Waiting for page load...\n"
                        },
                        {
                          "text": "📍 Checkpoint 3: Waiting for groups or error...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "🚨 WORKFLOW HANG DETECTED: page.waitForSelector: Timeout 2000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('[data-testid=\"loading\"]') to be visible\u001b[22m\n\n"
                        },
                        {
                          "text": "📍 Hang details:\n"
                        },
                        {
                          "text": "- URL: http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "- Title: Photo Dedup Tool\n"
                        },
                        {
                          "text": "- Body length: 58334 chars\n"
                        },
                        {
                          "text": "- Body preview: \n        \n            🖼️ Photo Deduplication Tool\n            Stage 3: Visual Interface\n            Status: Interactive photo selection with thumbnails - click photos to select/deselect for keeping\n        \n\n        ✅ Photos library connected\n\n        \n                            \n                 ...\n"
                        },
                        {
                          "text": "🚨 Workflow hang confirmed\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:32.023Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-firefox/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-firefox/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-firefox/error-context.md"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                        "column": 33,
                        "line": 441
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-8d8037f9a47994561a78",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 373,
              "column": 7
            },
            {
              "title": "API Endpoint Performance - /api/groups with limit=10",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "webkit",
                  "projectName": "webkit",
                  "results": [
                    {
                      "workerIndex": 7,
                      "parallelIndex": 1,
                      "status": "passed",
                      "duration": 506,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing /api/groups endpoint performance...\n"
                        },
                        {
                          "text": "⏱️ /api/groups response time: 13ms\n"
                        },
                        {
                          "text": "📊 Groups returned: 0\n"
                        },
                        {
                          "text": "📊 Total photos: 0\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:33.106Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-e137d682695c99f1c355",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 29,
              "column": 7
            },
            {
              "title": "API Endpoint Performance - /api/complete-workflow",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "webkit",
                  "projectName": "webkit",
                  "results": [
                    {
                      "workerIndex": 8,
                      "parallelIndex": 2,
                      "status": "passed",
                      "duration": 472,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing /api/complete-workflow endpoint performance...\n"
                        },
                        {
                          "text": "📊 Got 0 groups for workflow test\n"
                        },
                        {
                          "text": "⚠️ No groups available for workflow test\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:34.582Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-9311738472c886ff2560",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 60,
              "column": 7
            },
            {
              "title": "Step-by-Step Legacy Page Workflow Timing",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "webkit",
                  "projectName": "webkit",
                  "results": [
                    {
                      "workerIndex": 9,
                      "parallelIndex": 3,
                      "status": "failed",
                      "duration": 16087,
                      "error": {
                        "message": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n",
                        "stack": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:134:14",
                        "location": {
                          "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                          "column": 14,
                          "line": 134
                        },
                        "snippet": "  132 |       // Wait for either groups to appear or error message\n  133 |       await Promise.race([\n> 134 |         page.waitForSelector('.group-card', { timeout: 15000 }),\n      |              ^\n  135 |         page.waitForSelector('.error', { timeout: 15000 }),\n  136 |         page.waitForSelector('[data-testid=\"no-groups\"]', { timeout: 15000 })\n  137 |       ]);"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                            "column": 14,
                            "line": 134
                          },
                          "message": "TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n\n  132 |       // Wait for either groups to appear or error message\n  133 |       await Promise.race([\n> 134 |         page.waitForSelector('.group-card', { timeout: 15000 }),\n      |              ^\n  135 |         page.waitForSelector('.error', { timeout: 15000 }),\n  136 |         page.waitForSelector('[data-testid=\"no-groups\"]', { timeout: 15000 })\n  137 |       ]);\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:134:14"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing legacy page step-by-step workflow timing...\n"
                        },
                        {
                          "text": "🚀 Step 1: Loading legacy page...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "⏱️ Step 1 (Page load): 630ms\n"
                        },
                        {
                          "text": "🚀 Step 2: Waiting for groups to load...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "❌ Step 2 TIMEOUT after 15013ms: TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('.group-card') to be visible\u001b[22m\n\n"
                        },
                        {
                          "text": "📝 Page content at timeout: \n        \n            🖼️ Photo Deduplication Tool\n            Stage 3: Visual Interface\n            Status: Interactive photo selection with thumbnails - click photos to select/deselect for keeping\n        \n\n        ✅ Photos library connected\n\n        \n                            \n                                ~3794 MB\n                                Potential Savings\n                            \n                            \n                                500\n                                ...\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:35.000Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-webkit/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-webkit/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-f68df-Legacy-Page-Workflow-Timing-webkit/error-context.md"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                        "column": 14,
                        "line": 134
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-1ecc61db4c266ce57921",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 116,
              "column": 7
            },
            {
              "title": "JavaScript Memory and Performance Monitoring",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "webkit",
                  "projectName": "webkit",
                  "results": [
                    {
                      "workerIndex": 10,
                      "parallelIndex": 0,
                      "status": "passed",
                      "duration": 12370,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing JavaScript performance and memory usage...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "📊 Initial memory usage: 0.00 MB\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "📊 Memory at 2s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 4s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 6s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 8s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "📊 Memory at 10s: 0.00 MB (0.0 KB)\n"
                        },
                        {
                          "text": "✅ Memory usage appears stable\n"
                        },
                        {
                          "text": "📊 DOM content loaded: 0ms\n"
                        },
                        {
                          "text": "📊 Page load complete: 0ms\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:35.939Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-e868a94704b16b64e3c6",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 204,
              "column": 7
            },
            {
              "title": "Network Request Waterfall Analysis",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "webkit",
                  "projectName": "webkit",
                  "results": [
                    {
                      "workerIndex": 8,
                      "parallelIndex": 2,
                      "status": "passed",
                      "duration": 5274,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Analyzing network request patterns...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "\n📊 Request Timeline:\n"
                        },
                        {
                          "text": "12ms - request: GET http://127.0.0.1:5003/legacy \n"
                        },
                        {
                          "text": "31ms - response:  http://127.0.0.1:5003/legacy 200\n"
                        },
                        {
                          "text": "1036ms - request: GET http://127.0.0.1:5003/api/stats \n"
                        },
                        {
                          "text": "1118ms - response:  http://127.0.0.1:5003/api/stats 200\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:35.557Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-3e19c2c8b044158be61c",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 271,
              "column": 7
            },
            {
              "title": "Backend API Health Check",
              "ok": true,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "webkit",
                  "projectName": "webkit",
                  "results": [
                    {
                      "workerIndex": 7,
                      "parallelIndex": 1,
                      "status": "passed",
                      "duration": 343,
                      "errors": [],
                      "stdout": [
                        {
                          "text": "\n🧪 Testing backend API health...\n"
                        },
                        {
                          "text": "🔍 Testing /api/health...\n"
                        },
                        {
                          "text": "✅ /api/health: 200 (18ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"stage\": \"Stage 5A: Lazy Loading Foundation\",\n  \"status\": \"healthy\",\n  \"timestamp\": \"2025-08-27T18:17:35.776911\"\n}...\n"
                        },
                        {
                          "text": "🔍 Testing /api/stats...\n"
                        },
                        {
                          "text": "✅ /api/stats: 200 (117ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"estimated_savings\": \"~3794 MB\",\n  \"potential_groups\": 1610,\n  \"sample_groups\": 62,\n  \"sample_photos\": 500,\n  \"sample_savings_mb\": 146.1,\n  \"success\": true,\n  \"timestamp\": \"2025-08-27T18:17:35.900...\n"
                        },
                        {
                          "text": "🔍 Testing /api/cache-stats...\n"
                        },
                        {
                          "text": "✅ /api/cache-stats: 200 (2ms)\n"
                        },
                        {
                          "text": "📊 Response: {\n  \"cache_stats\": {\n    \"cache_timestamp\": null,\n    \"clusters_cached\": 0,\n    \"metadata_cached\": 0\n  },\n  \"success\": true,\n  \"timestamp\": \"2025-08-27T18:17:35.903872\"\n}...\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:35.583Z",
                      "annotations": [],
                      "attachments": []
                    }
                  ],
                  "status": "expected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-a6b7aa614f1abd2d633d",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 342,
              "column": 7
            },
            {
              "title": "Comprehensive Workflow Hang Detection",
              "ok": false,
              "tags": [],
              "tests": [
                {
                  "timeout": 30000,
                  "annotations": [],
                  "expectedStatus": "passed",
                  "projectId": "webkit",
                  "projectName": "webkit",
                  "results": [
                    {
                      "workerIndex": 7,
                      "parallelIndex": 1,
                      "status": "failed",
                      "duration": 2239,
                      "error": {
                        "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m",
                        "stack": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:441:33",
                        "location": {
                          "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                          "column": 33,
                          "line": 441
                        },
                        "snippet": "  439 |     } else {\n  440 |       console.log('🚨 Workflow hang confirmed');\n> 441 |       expect(workflowCompleted).toBe(true); // This will fail and show hang point\n      |                                 ^\n  442 |     }\n  443 |   });\n  444 |"
                      },
                      "errors": [
                        {
                          "location": {
                            "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                            "column": 33,
                            "line": 441
                          },
                          "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n\n  439 |     } else {\n  440 |       console.log('🚨 Workflow hang confirmed');\n> 441 |       expect(workflowCompleted).toBe(true); // This will fail and show hang point\n      |                                 ^\n  442 |     }\n  443 |   });\n  444 |\n    at /Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js:441:33"
                        }
                      ],
                      "stdout": [
                        {
                          "text": "\n🧪 Running comprehensive workflow hang detection...\n"
                        },
                        {
                          "text": "📍 Checkpoint 1: Loading legacy page...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/legacy (-1ms)\n"
                        },
                        {
                          "text": "🖥️ Console log: Script starting...\n"
                        },
                        {
                          "text": "📍 Checkpoint 2: Waiting for page load...\n"
                        },
                        {
                          "text": "📍 Checkpoint 3: Waiting for groups or error...\n"
                        },
                        {
                          "text": "🖥️ Console log: About to fetch stats...\n"
                        },
                        {
                          "text": "📤 Request: GET http://127.0.0.1:5003/api/stats\n"
                        },
                        {
                          "text": "📥 Response: 200 http://127.0.0.1:5003/api/stats (-1ms)\n"
                        },
                        {
                          "text": "🚨 WORKFLOW HANG DETECTED: page.waitForSelector: Timeout 2000ms exceeded.\nCall log:\n\u001b[2m  - waiting for locator('[data-testid=\"loading\"]') to be visible\u001b[22m\n\n"
                        },
                        {
                          "text": "📍 Hang details:\n"
                        },
                        {
                          "text": "- URL: http://127.0.0.1:5003/legacy\n"
                        },
                        {
                          "text": "- Title: Photo Dedup Tool\n"
                        },
                        {
                          "text": "- Body length: 58334 chars\n"
                        },
                        {
                          "text": "- Body preview: \n        \n            🖼️ Photo Deduplication Tool\n            Stage 3: Visual Interface\n            Status: Interactive photo selection with thumbnails - click photos to select/deselect for keeping\n        \n\n        ✅ Photos library connected\n\n        \n                            \n                 ...\n"
                        },
                        {
                          "text": "🚨 Workflow hang confirmed\n"
                        }
                      ],
                      "stderr": [],
                      "retry": 0,
                      "startTime": "2025-08-28T01:17:35.946Z",
                      "annotations": [],
                      "attachments": [
                        {
                          "name": "screenshot",
                          "contentType": "image/png",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-webkit/test-failed-1.png"
                        },
                        {
                          "name": "video",
                          "contentType": "video/webm",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-webkit/video.webm"
                        },
                        {
                          "name": "error-context",
                          "contentType": "text/markdown",
                          "path": "/Users/urikogan/code/dedup/test-results/test_photo_deletion_workfl-00322-ive-Workflow-Hang-Detection-webkit/error-context.md"
                        }
                      ],
                      "errorLocation": {
                        "file": "/Users/urikogan/code/dedup/tests/e2e/test_photo_deletion_workflow_diagnostics.spec.js",
                        "column": 33,
                        "line": 441
                      }
                    }
                  ],
                  "status": "unexpected"
                }
              ],
              "id": "8fc1e6a244d7afc5538a-b0175865473300ae3d7b",
              "file": "test_photo_deletion_workflow_diagnostics.spec.js",
              "line": 373,
              "column": 7
            }
          ]
        }
      ]
    }
  ],
  "errors": [],
  "stats": {
    "startTime": "2025-08-28T01:17:09.678Z",
    "duration": 41624.603,
    "expected": 15,
    "skipped": 0,
    "unexpected": 6,
    "flaky": 0
  }
}